
# Environment Configuration
DATABASE_URL=postgresql://soundhash_user:soundhash_password123@localhost:5432/soundhash
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=soundhash
DATABASE_USER=soundhash_user
DATABASE_PASSWORD=soundhash_password123

# API Keys (fill these in)
YOUTUBE_API_KEY=
YOUTUBE_OAUTH_CLIENT_ID=
YOUTUBE_OAUTH_CLIENT_SECRET=
TWITTER_BEARER_TOKEN=
TWITTER_CONSUMER_KEY=
TWITTER_CONSUMER_SECRET=
TWITTER_ACCESS_TOKEN=
TWITTER_ACCESS_TOKEN_SECRET=

REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USER_AGENT=soundhash_bot_v1.0
REDDIT_REFRESH_TOKEN=
REDDIT_SUBREDDITS=                           # Comma-separated list of subreddits to monitor (e.g., musicid,tipofmytongue)

# OAuth and Authentication
CALLBACK_BASE_URL=http://localhost:8000
AUTH_SERVER_HOST=0.0.0.0
AUTH_SERVER_PORT=8000

# Processing Settings
TEMP_DIR=./temp
MAX_CONCURRENT_DOWNLOADS=3
MAX_CONCURRENT_CHANNELS=2
SEGMENT_LENGTH_SECONDS=90
FINGERPRINT_SAMPLE_RATE=22050

# Ingestion backoff settings
CHANNEL_RETRY_DELAY=5
CHANNEL_MAX_RETRIES=3

# File management
KEEP_ORIGINAL_AUDIO=true
CLEANUP_SEGMENTS_AFTER_PROCESSING=true

# yt-dlp Download Configuration - YouTube Download Hardening
# See README "YouTube Download Failures / Rate Limiting" section for details

# Proxy configuration (helps with rate limits and geo-restrictions)
USE_PROXY=false
PROXY_URL=                                  # Single proxy: http://proxy.example.com:8080
PROXY_LIST=                                 # List of proxies (format depends on implementation; see README)

# Cookie authentication (recommended for reliability)
YT_COOKIES_FILE=                            # Path to Netscape cookies.txt file exported from browser
YT_COOKIES_FROM_BROWSER=                    # Browser name: chrome, chromium, firefox, brave, edge
YT_BROWSER_PROFILE=                         # Optional: 'Default', 'Profile 1', or Firefox profile name

# Player client override (use if videos appear restricted)
YT_PLAYER_CLIENT=                           # Options: android, ios, web_safari, tv, web_embedded

# Target Channels (comma separated)
TARGET_CHANNELS=

# Bot Settings
BOT_NAME=@soundhash_bot
BOT_KEYWORDS=find clip,source video,original,what song

# Observability Settings
METRICS_ENABLED=true                            # Enable/disable Prometheus metrics collection
METRICS_PORT=9090                               # Port for Prometheus metrics endpoint
HEALTH_CHECK_INTERVAL=300                       # Health check interval in seconds (default: 5 minutes)

# Data Retention and Cleanup Settings
RETENTION_TEMP_FILES_DAYS=7                     # Keep temporary audio files for 7 days
RETENTION_LOG_FILES_DAYS=30                     # Keep log files for 30 days
RETENTION_COMPLETED_JOBS_DAYS=30                # Keep completed processing jobs for 30 days
RETENTION_FAILED_JOBS_DAYS=90                   # Keep failed jobs longer for debugging (90 days)
LOG_DIR=./logs                                  # Directory for log files

# Similarity Search Configuration
# Thresholds for considering a match valid
SIMILARITY_CORRELATION_THRESHOLD=0.70        # Minimum correlation score (0.0-1.0)
SIMILARITY_L2_THRESHOLD=0.70                  # Minimum L2 similarity score (0.0-1.0)
SIMILARITY_MIN_SCORE=0.70                     # Minimum combined similarity score (0.0-1.0)
SIMILARITY_MIN_DURATION=5.0                   # Minimum duration in seconds

# Weights for combining correlation and L2 similarity (must sum to 1.0)
SIMILARITY_CORRELATION_WEIGHT=0.5             # Weight for correlation component
SIMILARITY_L2_WEIGHT=0.5                      # Weight for L2 similarity component
